/*https://github.com/im4aLL/form-validation*/
var Form=function(formObj,rules,errorReplacement){this.form=formObj;this.rulesObj=rules;this.errorReplacement=errorReplacement!==undefined&&errorReplacement===true?true:false};
Form.prototype.validate=function(callback){var self=this,rules=this.rulesObj,form=this.form,errReplace=this.errorReplacement;form.submit(function(){form.find(".is-error").removeClass("is-error").find(".hint").remove();var errors=[],error=false,fieldValues={};$.each(rules,function(id,field){var $field=$("#"+id),isValidField=true;if(field.inputType!==undefined&&(field.inputType=="radio"||field.inputType=="checkbox"))$field=$('input[name="'+id+'"]:checked');if(field.customMethod!==undefined&&field.customMethod!=
null)isValidField=field.customMethod.call(this,{id:id,field:field});else isValidField=self.method(id,field);if(isValidField===false){error=true;var e={};e.id=id;e.errMsg=field.errMsg!==undefined?field.errMsg:"";errors.push(e)}else if(field.type=="array"){var temp=[];$("#"+id).find("[name^='"+id+"']:checked").each(function(index,el){temp.push($(el).val())});fieldValues[id]=temp}else fieldValues[id]=$field.val();var customError=field.errReplace!==undefined&&field.errReplace!=null?true:false;customError?
field.errReplace.call(this,{id:id,field:field,isValidField:isValidField}):"";if(errReplace===false&&!isValidField&&customError===false)self.addError(id,field);$field.blur(function(){self.method(id,field)===true?self.removeError(id,field):self.addError(id,field)})});if(typeof callback=="function")callback.call(this,{obj:form,isValid:!error,err:errors,values:fieldValues});return false})};
Form.prototype.method=function(id,field){var $field=$("#"+id),isValidField=true;if(field.inputType!==undefined&&(field.inputType=="radio"||field.inputType=="checkbox"))$field=$('input[name="'+id+'"]:checked');if(field.require!==undefined){var requireInputType=this.rulesObj[field.require.name].inputType;if(requireInputType===undefined&&$("#"+field.require.name).val()!=field.require.value)return true;else if(requireInputType!==undefined&&(requireInputType=="radio"||requireInputType=="checkbox")&&$('input[name="'+
field.require.name+'"]:checked').val()!=field.require.value)return true}switch(field.type){case "email":var re=/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;isValidField=re.test($field.val());break;case "text":if($field.val()===undefined||$field.val().length==0)isValidField=false;break;case "array":isValidField=false;$('input[name="'+id+'[]"]').each(function(index,el){if(field.inputType==
"checkbox"){if($(el).is(":checked"))isValidField=true}else if($(el).val().length>0)isValidField=true});break}return isValidField};Form.prototype.addError=function(id,field){var $field=$("#"+id),errText=field.errMsg!==undefined?field.errMsg:"This field is required";$field.parent().addClass("is-error").find(".hint").remove();$field.parent().append('<span class="hint"><i></i>'+errText+"</span>")};Form.prototype.removeError=function(id,field){var $field=$("#"+id);$field.parent().removeClass("is-error").find(".hint").remove()};